{
  "id": "arch-005",
  "question": "How do I clean the pacman cache to free up disk space?",
  "golden_answer": {
    "summary": "Use 'paccache -r' to remove old cached packages, or 'pacman -Sc' to remove all uninstalled packages from cache.",
    "steps": [
      "Check cache size: du -sh /var/cache/pacman/pkg/",
      "Install pacman-contrib if not present: sudo pacman -S pacman-contrib",
      "Remove all but the 3 most recent versions: sudo paccache -r",
      "Or remove all but N recent versions: sudo paccache -rk<N>",
      "Or remove all cached versions of uninstalled packages: sudo pacman -Sc",
      "Or remove ALL cached packages (not recommended): sudo pacman -Scc",
      "Verify freed space: du -sh /var/cache/pacman/pkg/"
    ],
    "required_commands": [
      "paccache -r",
      "pacman -Sc",
      "du -sh"
    ],
    "required_files": [
      "/var/cache/pacman/pkg/"
    ],
    "required_concepts": [
      "pacman cache",
      "package cache cleanup",
      "disk space management"
    ],
    "validation": [
      "du -sh /var/cache/pacman/pkg/",
      "Compare before/after cache size"
    ],
    "warnings": [
      "DON'T use 'pacman -Scc' (removes ALL cache) unless you understand the risk - you cannot downgrade packages without cache",
      "Keep at least 2-3 recent versions for easy downgrade if new package breaks",
      "paccache -r is safer than pacman -Sc because it preserves recent versions",
      "Consider automating with systemd timer: systemctl enable paccache.timer"
    ],
    "references": [
      "Arch Wiki: Pacman/Tips and tricks#Cleaning the package cache",
      "man paccache",
      "man pacman"
    ]
  }
}
