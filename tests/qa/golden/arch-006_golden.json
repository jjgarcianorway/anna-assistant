{
  "id": "arch-006",
  "question": "How do I rebuild the initramfs after a kernel update?",
  "golden_answer": {
    "summary": "Use 'mkinitcpio -P' to regenerate all initramfs presets, or 'mkinitcpio -p linux' for a specific kernel.",
    "steps": [
      "Check current kernel version: uname -r",
      "Regenerate all presets: sudo mkinitcpio -P",
      "Or regenerate for specific kernel: sudo mkinitcpio -p linux",
      "Check for errors in output - IMPORTANT: errors can make system unbootable",
      "Verify initramfs files created: ls -lh /boot/initramfs-*.img",
      "Reboot to test: sudo reboot"
    ],
    "required_commands": [
      "mkinitcpio -P",
      "uname -r"
    ],
    "required_files": [
      "/boot/initramfs-linux.img",
      "/etc/mkinitcpio.conf"
    ],
    "required_concepts": [
      "initramfs",
      "mkinitcpio",
      "kernel modules"
    ],
    "validation": [
      "ls -lh /boot/initramfs-*.img",
      "Check file modification timestamp is recent",
      "Successful reboot"
    ],
    "warnings": [
      "CRITICAL: Errors in mkinitcpio can make system unbootable - always check output",
      "Have a live USB ready for recovery if something goes wrong",
      "Don't reboot if mkinitcpio shows errors",
      "Common after hooks: check /etc/mkinitcpio.conf for custom hooks"
    ],
    "references": [
      "Arch Wiki: mkinitcpio",
      "man mkinitcpio"
    ]
  }
}
