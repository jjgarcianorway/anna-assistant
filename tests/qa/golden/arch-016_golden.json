{
  "id": "arch-016",
  "question": "How do I install NVIDIA drivers on Arch Linux?",
  "golden_answer": {
    "summary": "Install nvidia or nvidia-lts package, add nvidia modules to mkinitcpio, regenerate initramfs, and configure Xorg if needed.",
    "steps": [
      "Check GPU model: lspci | grep -i nvidia",
      "For latest kernel: sudo pacman -S nvidia nvidia-utils",
      "For LTS kernel: sudo pacman -S nvidia-lts nvidia-utils",
      "Edit /etc/mkinitcpio.conf: Add 'nvidia nvidia_modeset nvidia_uvm nvidia_drm' to MODULES array",
      "Regenerate initramfs: sudo mkinitcpio -P",
      "Add kernel parameter: Edit /etc/default/grub, add 'nvidia-drm.modeset=1' to GRUB_CMDLINE_LINUX_DEFAULT",
      "Regenerate GRUB: sudo grub-mkconfig -o /boot/grub/grub.cfg",
      "Create Xorg config (if needed): sudo nvidia-xconfig",
      "Reboot: sudo reboot",
      "Verify driver loaded: nvidia-smi"
    ],
    "required_commands": [
      "pacman -S nvidia",
      "mkinitcpio -P",
      "nvidia-smi"
    ],
    "required_files": [
      "/etc/mkinitcpio.conf",
      "/etc/X11/xorg.conf (optional)"
    ],
    "required_concepts": [
      "NVIDIA proprietary drivers",
      "kernel modules",
      "early KMS"
    ],
    "validation": [
      "nvidia-smi shows GPU information",
      "No errors in Xorg log: /var/log/Xorg.0.log",
      "glxinfo | grep NVIDIA shows NVIDIA renderer"
    ],
    "warnings": [
      "CRITICAL: Match driver version to your kernel (nvidia vs nvidia-lts)",
      "After kernel updates, nvidia modules must be rebuilt",
      "nvidia and nouveau (open source) drivers conflict - remove nouveau",
      "Optimus laptops (Intel + NVIDIA) need special configuration",
      "If using Wayland, may need additional configuration",
      "Have live USB ready - driver issues can prevent booting to GUI"
    ],
    "references": [
      "Arch Wiki: NVIDIA",
      "Arch Wiki: Kernel mode setting"
    ]
  }
}
