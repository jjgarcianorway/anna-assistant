{
  "id": "arch-017",
  "question": "I'm getting disk space errors. How do I find what's using space?",
  "golden_answer": {
    "summary": "Use 'du -sh' to find large directories, 'ncdu' for interactive analysis, clean pacman cache, check journal size, find large files with 'find'.",
    "steps": [
      "Check overall disk usage: df -h",
      "Find large directories in /: sudo du -sh /* | sort -h",
      "Install ncdu for interactive analysis: sudo pacman -S ncdu",
      "Analyze specific directory: sudo ncdu /",
      "Check pacman cache size: du -sh /var/cache/pacman/pkg/",
      "Clean pacman cache: sudo paccache -r",
      "Check journal size: journalctl --disk-usage",
      "Clean old journal logs: sudo journalctl --vacuum-size=100M",
      "Find large files: sudo find / -type f -size +100M 2>/dev/null"
    ],
    "required_commands": [
      "df -h",
      "du -sh",
      "ncdu"
    ],
    "required_files": [
      "/var/cache/pacman/pkg/",
      "/var/log/journal/"
    ],
    "required_concepts": [
      "disk usage analysis",
      "du command",
      "ncdu",
      "pacman cache cleanup"
    ],
    "validation": [
      "df -h shows more free space after cleanup",
      "Specific large files/directories identified"
    ],
    "warnings": [
      "Don't delete files you don't understand - research first",
      "Common space hogs: /var/cache/pacman/pkg/, /var/log/journal/, ~/.cache/",
      "Use paccache -r instead of pacman -Scc to keep recent package versions",
      "Journal can grow very large - vacuum regularly",
      "Check if /tmp or /var/tmp have accumulated large files",
      "User home directories (~/.cache/, ~/Downloads/) often accumulate space"
    ],
    "references": [
      "Arch Wiki: Pacman/Tips and tricks",
      "Arch Wiki: systemd/Journal",
      "man du",
      "man ncdu"
    ]
  }
}
