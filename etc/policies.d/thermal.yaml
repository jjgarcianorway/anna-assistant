# Anna Thermal Management Policies
# Automatically manages CPU temperature and fan behavior

# Policy 1: Enforce quiet fan profile when cool
- when: "always"
  then: "log"
  message: "Thermal management active"
  enabled: true

# Policy 2: Detect thermal spike and throttle
- when: "telemetry.cpu_temp > 85"
  then: "alert"
  message: "High CPU temperature detected (>85째C), consider throttling"
  enabled: true

# Policy 3: Critical temperature protection
- when: "telemetry.cpu_temp > 90"
  then: "alert"
  message: "CRITICAL: CPU temperature >90째C, emergency throttling recommended"
  enabled: true

# Policy 4: Optimal temperature maintenance (future: execute actions)
- when: "telemetry.cpu_temp > 75 && telemetry.cpu_temp < 85"
  then: "log"
  message: "CPU temperature elevated (75-85째C), monitoring closely"
  enabled: true

# Policy 5: Cool state - system healthy
- when: "telemetry.cpu_temp < 60"
  then: "log"
  message: "CPU temperature optimal (<60째C)"
  enabled: false  # Disabled by default to reduce log noise

# Future adaptive policies (require action execution):
# - when: "cpu_temp > 85 && avg_cpu_1min > 90"
#   then: { action: "throttle", method: "powerprofilesctl set power-saver" }
#   explain: "Thermal spike; reducing boost to cap acoustics and temps"
#
# - when: "cpu_temp < 55 && avg_cpu_5min < 20"
#   then: { action: "optimize", method: "asusctl profile -P quiet" }
#   explain: "Cool state; enforcing quiet fan profile"
